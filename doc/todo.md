初期测试：预期直接使用qrcode模块尝试生成，问题在于缺少起始终止标记，<br>或许可以考虑前后帧为全白，由白进入有用信息时判定为开始，再次进入白时<br>，判定为结束

```markdown
[标识符][块编号/总块数][CRC][数据]

标识符：1 字节
块编号 + 总块数：各 2 字节 → 共 4 字节
CRC32：4 字节
合计：1 + 4 + 4 = 9 字节

- 标识符：可以是 START / DATA / END。包含起始，数据，结束，冗余
- 块编号：例如 当前块号/总块数，这样即使丢掉起始块，也能知道总量。
- CRC：块级别校验。
- 数据：真实负载。
```

> 问题：qrcode模块不能自定义数据量



询问ai的

| 项目             | 值 / 说明                                          |
| ---------------- | -------------------------------------------------- |
| QR 版本假设      | 40-M（DataBytes = 2331）                           |
| 单块 RS          | 15% → 2331 × 0.85 ≈ 1981 字节                      |
| 自定义头部       | 9 字节（标识符 + 块编号/总块数 + CRC32）           |
| 单块理论可存数据 | 1981 − 9 ≈ **1972 字节**                           |
| 全局 RS          | 15% → 约 8548 冗余块（总块数 65535）               |
| 生成速度影响     | 单块 RS 几乎不影响；全局 RS 对大文件生成有明显影响 |

- 编码：
  - [x] ~~起始终止标记~~（改用index记录）
  - [x] ~~定位标记~~（依靠qrcode模块生成）
  - [x] ~~rs纠错码~~（依靠qrcode模块生成）
  - [x] ~~补齐码补齐空位~~（依靠qrcode模块生成）
  - [x] 原字节流分组
  - [x] 图片序列合成视频mp4
  - [ ] 全局纠错 -> 用rs生成冗余块

- 解码
  - [x] 拆解视频帧
  - [x] 识别二维码
  - [x] 解析块头
  - [x] 校验单块
  - [x] 解析块，放入字典并去重
  - [ ] rs全局恢复
  - [x] 按编号拼接数据
  - [x] 写文件

疑问：如果这个步骤，flag其实就没有意义了，顺序也可以由编号来解决